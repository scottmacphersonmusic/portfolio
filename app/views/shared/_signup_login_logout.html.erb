<ul class="right">
  <li class="has-dropdown">
  <% if user_signed_in? %>
    <a href="#"><%= current_user.email %></a>
    <ul class="dropdown">
      <li><%= link_to("Sign Out", destroy_user_session_path,
              method: :delete, class: "navlink") %>
      </li>
    </ul>

  <% else %>
    <a href="#">Guest</a>
    <ul class="dropdown">
      <% unless (params[:controller] == "devise/registrations" &&
         params[:action] == "new") %>
        <li><%= link_to("Sign Up", new_user_registration_path,
              class: "navlink") %></li>
      <% end %>

      <% unless (params[:controller] == "devise/sessions" &&
         params[:action] == "new") %>
        <li><%= link_to "Sign In", new_user_session_path, class: "navlink" %></li>
      <% end %>

      <li><%= link_to("Sign in with Twitter",
            user_omniauth_callback_path(:twitter), class: "navlink") %>
      </li>
    </ul>
  <% end %>
  </li>
</ul>
